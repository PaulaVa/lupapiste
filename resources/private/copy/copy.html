<!DOCTYPE html>
<html>
<body>

  <!-- autocomplete and map need to stay in dom, so 'ko if' cannot be used. -->
  <section class="page container" id="copy">
    <h1 data-bind="ltext: 'copyApplication.topic'"></h1>
    <div class="create-application-search-box"
         data-bind="visible: phase() === 0">
      <p data-bind="ltext: 'copyApplication.locationInfo'"></p>
      <input data-bind="textInput: search, attr: {placeholder: loc('create.placeholder')}, css: {'ui-autocomplete-loading':searching}"
             id="copy-search" type="text" class="form-input text address-search" autofocus="autofocus" />
      <button data-bind="click: searchNow" class="positive" data-test-id="copy-search-button">
          <i class="lupicon-search"></i>
          <span data-bind="ltext: 'search'"></span>
      </button>
    </div>
    <div id="copy-map" class="map create-application-map"
         data-bind="visible: phase() === 0"
         style="width: 100%; height: 700px;"></div>

    <!-- ko if: phase() >= 1 -->
    <div data-bind="ltext: 'applications.location'"></div>
    <div class="copy-selection-verified copy-selection-wrapper">
      <span data-bind="text: locationInfo()"></span>
      <i class="lupicon-check right positive"></i>
    </div>
    <!-- /ko -->

    <!-- ko if: phase() === 1 -->
    <div data-bind="ltext: 'application.copy.osapuolet.candidates'"></div>
    <div id="copy-auths"
         data-bind="foreach: inviteCandidates "><div class="blockbox-wrapper copy-selection-wrapper">
        <input type="checkbox"
               data-bind="attr: {'id': $index()},
                                 checked: $data.selected">
        <label class="blockbox-label"
               data-bind="attr: {'for': $index()},
                          text: $parent.authDescription($data)"></label>
    </div></div>
    <!-- /ko -->
    <!-- ko if: phase() === 2 -->
    <div data-bind="ltext: 'application.copy.osapuolet.invitees'"></div>
    <div id="copy-auths"
         data-bind="foreach: selectedInviteCandidates ">
        <div class="copy-selection-verified copy-selection-wrapper">
          <span data-bind="text: $parent.authDescription($data)"></span>
          <i class="lupicon-check right positive"></i>
        </div>
    </div>
    <!-- /ko -->

    <!-- ko if: phase() > 0 -->
    <div>
      <button data-bind="click: buttonActions[phase()].previous.action" class="reject">
        <i class="lupicon-chevron-left"></i>
        <span data-bind="ltext: buttonActions[phase()].previous.ltext"></span>
      </button>
      <button data-bind="click: buttonActions[phase()].next.action" class="positive">
        <span data-bind="ltext: buttonActions[phase()].next.ltext"></span>
        <i class="lupicon-chevron-right"></i>
      </button>
    </div>
    <!-- /ko -->
  </section>

</body>
</html>
