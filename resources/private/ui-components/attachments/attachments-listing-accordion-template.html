<script class="ko-template" type="text/x-jquery-tmpl"
        id="attachments-listing-accordion-template">
  <!-- ko if: $data.data && $data.data().hasContent -->
    <rollup class="rollup-accordion" params="open: $data.open">
      <rollup-status-button
         params="open: $parent.open,
                 style: $parent.level === 0 ? 'secondary' : 'tertiary',
                 status: $parent.data().status,
                 text: $parent.name"></rollup-status-button>
      <div class="rollup__open rollup-accordion-content">
        <!-- ko if: $parent.data().type === "main" -->
        <div data-bind="foreach: $parent.accordions">
          <div class="rollup-accordion-content-part"
               data-bind="template:
                          {name: 'attachments-listing-accordion-template',
                           data: _.merge($data, {level: $parents[1].level + 1})}">
          </div>
        </div>
        <!-- /ko -->
        <!-- ko if: $parent.data().type === "sub" -->
        <div class="rollup-accordion-content-part"
             data-bind="template:
                        {name: 'attachments-listing-attachment-info-template',
                        data: _.merge($parent.data().attachmentInfos,
                                      {level: $parents[1].level + 1})}">
        </div>
        <!-- /ko -->
      </div>
    </rollup>
  <!-- /ko -->
</script>
