<script class="ko-template" id="review-tasks-template" type="text/x-jquery-tmpl">
  <div class="review-tasks"
       data-bind="visible: _.size( reviews() ),
                  if: _.size( reviews() )">
    <h2 data-bind="ltext: 'task-katselmus._group_label'"></h2>
    <table class="reviews-table">
      <thead>
        <tr>
          <th></th>
          <th data-bind="ltext: 'application.taskDisplayName'"></th>
          <th data-bind="ltext: 'date'"></th>
          <th data-bind="ltext: 'review.author'"></th>
          <th data-bind="ltext: 'review.state'"></th>
          <th data-bind="ltext: 'review.condition'"></th>
          <th></th>
        </tr>
      </thead>
      <tbody data-bind="foreach: reviews">
        <tr data-test-type="task-katselmus"
            data-bind="attr: {'data-test-index': $index},
                       css: {'faulty': taskState === 'faulty_review_task'}">
          <td class="reviews-table--icons" data-bind="if: hasAttachments">
            <i class="lupicon-paperclip"></i></td>
          <td data-test-column="requirement">
            <a data-bind="text: name,
                          click: $parent.openTask"></a>
          </td>
          <td data-test-column="date" data-bind="text: date"></td>
          <td data-test-column="name" data-bind="text: author"></td>
          <td data-test-column="state" data-bind="if: state">
            <span data-bind="ltext: 'task-katselmus.katselmus.tila.' + state"></span>
          </td>
          <td data-test-column="condition" data-bind="if: condition">
            <span data-bind="ltext: 'yes'"></span>
          </td>
          <td data-bind="if: notes" class="reviews-table--action">
            <a data-bind="ltext: 'review.show-notes',
                          attr: {'data-test-id': 'show-review-note-' + $index()},
                          toggleClick: notesVisible"></a></td>
        </tr>
        <!-- ko if: notesVisible -->
        <tr class="reviews-table__note">
          <td colspan="7"
              class="reviews-table--extra"
              data-bind="text: notes,
                         attr: {'data-test-id': 'review-note-' + $index()}"></td>
        </tr>
        <tr></tr>
        <!-- /ko -->
      </tbody>
    </table>
    <div data-test-id="reviews-table-end"></div>
  </div>
</script>
