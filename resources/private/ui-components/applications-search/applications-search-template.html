<!DOCTYPE html>
<html>
<body>
  <section class="page container">
    <script type="text/x-jquery-tmpl" id="applications-search-template">
      <!-- ko ifnot: noApplications() -->
      <div class="applications-search-top">
        <div class="container">
          <h1 data-bind="ltext: 'navigation'"></h1>

          <div class="button-group">
            <button data-bind="click: create"
                    data-test-id="applications-create-new-inforequest"
                    class="positive application-create">
              <i class="lupicon-circle-plus"></i>
              <span data-bind="ltext: 'newRequest.newInforequest'"></span>
            </button>

            <button data-bind="click: create"
                    data-test-id="applications-create-new-application"
                    class="positive application-create">
              <i class="lupicon-circle-plus"></i>
              <span data-bind="ltext: 'newRequest.newApplication'"></span>
            </button>

            <!-- ko if: features.enabled('ajanvaraus') && lupapisteApp.models.currentUser.isApplicant -->
            <a href="#!/new-appointment">
              <button data-test-id="applications-goto-new-appointment"
                    class="positive application-create">
                <i class="lupicon-circle-plus"></i>
                <span data-bind="ltext: 'new-appointment.page-title'"></span>
              </button>
            </a>
            <!-- /ko -->

            <!-- ko if: authorizationModel.ok('create-application-from-previous-permit') -->
            <button data-bind="click: createWithPrevPermit"
                    data-test-id="applications-create-new-with-prev-permit"
                    class="positive application-create">
              <i class="lupicon-circle-plus"></i>
              <span data-bind="ltext: 'newRequest.createNewWithPrevPermit'"></span>
            </button>
            <!-- /ko -->
          </div>

          <!-- ko if: lupapisteApp.models.globalAuthModel.ok('enable-foreman-search') -->
          <div class="form-grid form-grid--no-border">
            <span
                 data-bind="component: {name: 'radio-field',
                                        params: {value: 'applications',
                                                 selectedValue: searchType,
                                                 id: 'searchTypeApplications',
                                                 name: 'searchType',
                                                 lLabel: 'navigation'}}"></span>
            <span
                 data-bind="component: {name: 'radio-field',
                                        params: {value: 'foreman',
                                                 selectedValue: searchType,
                                                 id: 'searchTypeForeman',
                                                 name: 'searchType',
                                                 lLabel: 'applications.search.foremen'}}"></span>
          </div>
          <!-- /ko -->

          <!-- ko if: showApplicationsSearch -->
          <div data-bind="component: {name: 'applications-search-filter', params: {dataProvider: dataProvider}}" class="applications-search-component"></div>
          <!-- ko if: externalApi.enabled -->
          <button data-bind="click: externalApi.showPermitsOnMap, visible: gotResults"
                  data-test-id="external-show-permits-on-map">
            <i class="lupicon-location"></i>
            <span data-bind="text: 'N\u00E4yt\u00E4 hankkeet kartalla'"></span></button>
          <!-- /ko -->
          <div data-bind="component: {name: 'applications-search-tabs', params: {dataProvider: dataProvider, gotResults: gotResults}}" class="applications-search-component"></div>
          <!-- /ko -->
          <!-- ko if: showForemanSearch -->
            <div data-bind="component: {name: 'applications-foreman-search-filter', params: {dataProvider: dataProvider}}" class="applications-search-component"></div>
            <div data-bind="component: {name: 'applications-foreman-search-tabs', params: {dataProvider: dataProvider, gotResults: gotResults}}" class="applications-search-component"></div>
          <!-- /ko -->
        </div>
      </div>
      <!-- /ko -->

      <div class="container">
        <!-- ko if: showApplicationsSearch -->
          <!-- ko ifnot: noApplications() -->
            <div data-bind="component: {name: 'applications-search-results', params: {dataProvider: dataProvider, gotResults: gotResults}}" class="applications-search-component"></div>
            <!-- ko if: gotResults() -->
            <div data-bind="component: {name: 'applications-search-paging', params: {dataProvider: dataProvider, limits: limits, count: totalCount}}" class="applications-search-component"></div>
            <!-- /ko -->
          <!-- /ko -->
        <!-- /ko -->
        <!-- ko if: showForemanSearch -->
          <!-- ko ifnot: noApplications() -->
            <div data-bind="component: {name: 'applications-foreman-search-results', params: {dataProvider: dataProvider, gotResults: gotResults}}" class="applications-search-component"></div>
            <!-- ko if: gotResults() -->
            <div data-bind="component: {name: 'applications-search-paging', params: {dataProvider: dataProvider, limits: limits, count: totalCount}}" class="applications-search-component"></div>
            <!-- /ko -->
          <!-- /ko -->
        <!-- /ko -->

        <!-- ko if: noApplications() -->
        <div class="applications-empty-state"
             data-bind="css: {wide: !authorizationModel.ok('create-application-from-previous-permit')}">
          <h1 data-bind="ltext: missingTitle"></h1>
          <p data-bind="ltext: missingDesc"></p>

          <div class="missing-wrapper">
              <div class="missing-inforequest-box app-type-box">
                  <h2 data-bind="ltext: 'applications.missing.inforequest.title'"></h2>
                  <p data-bind="lhtml: 'applications.missing.inforequest.desc'"></p>
              </div>

            <div class="missing-application-box app-type-box">
                <h2 data-bind="ltext: 'applications.missing.application.title'"></h2>
              <p data-bind="lhtml: 'applications.missing.application.desc'"></p>
            </div>

            <div class="missing-prev-permit-box app-type-box">
              <h2 data-bind="ltext: 'applications.createWithPrevPermit.title'"></h2>
              <p data-bind="ltext: 'applications.createWithPrevPermit.desc'"></p>
            </div>
          </div>
          <div class="missing-wrapper">
              <div class="missing-inforequest-box app-type-button">
                  <p><button
                data-bind="click: create"
                data-test-id="applications-create-new-inforequest"
                class="positive application-create">
                      <i class="lupicon-circle-plus"></i>
                      <span data-bind="ltext: 'newRequest.newInforequest'"></span>
                  </button></p>
              </div>

            <div class="missing-application-box app-type-button">
                <p><button
                data-bind="click: create"
                data-test-id="applications-create-new-application"
                class="positive application-create">
                  <i class="lupicon-circle-plus"></i>
                <span data-bind="ltext: 'newRequest.newApplication'"></span>
                </button></p>
            </div>

            <div class="missing-prev-permit-box app-type-button">
                <p><button
                data-bind="click: createWithPrevPermit"
                data-test-id="applications-create-with-prev-permit"
                class="positive application-create">
                  <i class="lupicon-circle-plus"></i>
                  <span data-bind="ltext: 'newRequest.createNewWithPrevPermit'"></span>
                </button></p>
            </div>
          </div>


        </div>
        <!-- /ko -->
      </div>
    </script>
  </section>
</body>
</html>
